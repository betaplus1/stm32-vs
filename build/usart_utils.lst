ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 1


   1              		.cpu cortex-m0plus
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"usart_utils.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.rodata.UART_PARSE.str1.4,"aMS",%progbits,1
  16              		.align	2
  17              	.LC0:
  18 0000 203D3E20 		.ascii	" => \000"
  18      00
  19 0005 000000   		.align	2
  20              	.LC3:
  21 0008 626C696E 		.ascii	"blink\000"
  21      6B00
  22 000e 0000     		.align	2
  23              	.LC6:
  24 0010 61646320 		.ascii	"adc id\000"
  24      696400
  25 0017 00       		.align	2
  26              	.LC8:
  27 0018 61646320 		.ascii	"adc reset\000"
  27      72657365 
  27      7400
  28 0022 0000     		.align	2
  29              	.LC10:
  30 0024 61646320 		.ascii	"adc debug\000"
  30      64656275 
  30      6700
  31 002e 0000     		.align	2
  32              	.LC12:
  33 0030 61646320 		.ascii	"adc data\000"
  33      64617461 
  33      00
  34              		.section	.text.UART_PARSE,"ax",%progbits
  35              		.align	1
  36              		.global	UART_PARSE
  37              		.arch armv6s-m
  38              		.syntax unified
  39              		.code	16
  40              		.thumb_func
  41              		.fpu softvfp
  43              	UART_PARSE:
  44              	.LVL0:
  45              	.LFB284:
  46              		.file 1 "Src/usart_utils.c"
   1:Src/usart_utils.c **** #include "usart.h"
   2:Src/usart_utils.c **** #include <stdio.h>
   3:Src/usart_utils.c **** #include "state.h"
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 2


   4:Src/usart_utils.c **** #include "usart_utils.h"
   5:Src/usart_utils.c **** 
   6:Src/usart_utils.c **** extern state State;
   7:Src/usart_utils.c **** extern uint8_t UART_RX_BUFF[UART_RX_BUFFER_LENGTH];
   8:Src/usart_utils.c **** extern uint8_t COMMAND;
   9:Src/usart_utils.c **** 
  10:Src/usart_utils.c **** void UART_PARSE(uint8_t buffer[UART_RX_BUFFER_LENGTH])
  11:Src/usart_utils.c **** {
  47              		.loc 1 11 1 view -0
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 104
  50              		@ frame_needed = 0, uses_anonymous_args = 0
  51              		.loc 1 11 1 is_stmt 0 view .LVU1
  52 0000 30B5     		push	{r4, r5, lr}
  53              	.LCFI0:
  54              		.cfi_def_cfa_offset 12
  55              		.cfi_offset 4, -12
  56              		.cfi_offset 5, -8
  57              		.cfi_offset 14, -4
  58 0002 9BB0     		sub	sp, sp, #108
  59              	.LCFI1:
  60              		.cfi_def_cfa_offset 120
  61 0004 0400     		movs	r4, r0
  62              	.LBB2:
  12:Src/usart_utils.c ****     SERIAL_WRITE(" => ");
  63              		.loc 1 12 5 is_stmt 1 view .LVU2
  64 0006 01AD     		add	r5, sp, #4
  65 0008 6022     		movs	r2, #96
  66 000a 0021     		movs	r1, #0
  67 000c 02A8     		add	r0, sp, #8
  68              	.LVL1:
  69              		.loc 1 12 5 is_stmt 0 view .LVU3
  70 000e FFF7FEFF 		bl	memset
  71              	.LVL2:
  72              		.loc 1 12 5 is_stmt 1 view .LVU4
  73 0012 214B     		ldr	r3, .L8
  74 0014 1A68     		ldr	r2, [r3]
  75 0016 0192     		str	r2, [sp, #4]
  76 0018 1B79     		ldrb	r3, [r3, #4]
  77 001a 2B71     		strb	r3, [r5, #4]
  78              	.LVL3:
  79              		.loc 1 12 5 view .LVU5
  80 001c FA23     		movs	r3, #250
  81 001e 9B00     		lsls	r3, r3, #2
  82 0020 0422     		movs	r2, #4
  83 0022 2900     		movs	r1, r5
  84 0024 1D48     		ldr	r0, .L8+4
  85 0026 FFF7FEFF 		bl	HAL_UART_Transmit
  86              	.LVL4:
  87              	.LBE2:
  88              		.loc 1 12 25 view .LVU6
  13:Src/usart_utils.c ****     if (strcmp(buffer, "blink") == 0)
  89              		.loc 1 13 5 view .LVU7
  90              	.LBB3:
  91              		.loc 1 13 9 is_stmt 0 view .LVU8
  92 002a 1D49     		ldr	r1, .L8+8
  93 002c 2000     		movs	r0, r4
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 3


  94 002e FFF7FEFF 		bl	strcmp
  95              	.LVL5:
  96              		.loc 1 13 8 view .LVU9
  97 0032 0028     		cmp	r0, #0
  98 0034 04D1     		bne	.L2
  14:Src/usart_utils.c ****     {
  15:Src/usart_utils.c ****         COMMAND = cmd_blink;
  99              		.loc 1 15 9 is_stmt 1 view .LVU10
 100              		.loc 1 15 17 is_stmt 0 view .LVU11
 101 0036 1B4B     		ldr	r3, .L8+12
 102 0038 0122     		movs	r2, #1
 103 003a 1A70     		strb	r2, [r3]
 104              	.L1:
 105              	.LBE3:
  16:Src/usart_utils.c ****     }
  17:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
  18:Src/usart_utils.c ****     {
  19:Src/usart_utils.c ****         COMMAND = cmd_adc_id;
  20:Src/usart_utils.c ****     }
  21:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
  22:Src/usart_utils.c ****     {
  23:Src/usart_utils.c ****         COMMAND = cmd_adc_reset;
  24:Src/usart_utils.c ****     }
  25:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
  26:Src/usart_utils.c ****     {
  27:Src/usart_utils.c ****         COMMAND = cmd_adc_debug;
  28:Src/usart_utils.c ****     }
  29:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
  30:Src/usart_utils.c ****     {
  31:Src/usart_utils.c ****         COMMAND = cmd_adc_data;
  32:Src/usart_utils.c ****     }
  33:Src/usart_utils.c ****     else
  34:Src/usart_utils.c ****     {
  35:Src/usart_utils.c ****         COMMAND = cmd_undefined;
  36:Src/usart_utils.c ****     }
  37:Src/usart_utils.c **** }...
 106              		.loc 1 37 1 view .LVU12
 107 003c 1BB0     		add	sp, sp, #108
 108              		@ sp needed
 109              	.LVL6:
 110              		.loc 1 37 1 view .LVU13
 111 003e 30BD     		pop	{r4, r5, pc}
 112              	.LVL7:
 113              	.L2:
 114              	.LBB4:
  17:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 115              		.loc 1 17 10 is_stmt 1 view .LVU14
  17:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 116              		.loc 1 17 14 is_stmt 0 view .LVU15
 117 0040 1949     		ldr	r1, .L8+16
 118 0042 2000     		movs	r0, r4
 119 0044 FFF7FEFF 		bl	strcmp
 120              	.LVL8:
  17:Src/usart_utils.c ****     else if (strcmp(buffer, "adc id") == 0)
 121              		.loc 1 17 13 view .LVU16
 122 0048 0028     		cmp	r0, #0
 123 004a 03D1     		bne	.L4
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 4


  19:Src/usart_utils.c ****         COMMAND = cmd_adc_id;
 124              		.loc 1 19 9 is_stmt 1 view .LVU17
  19:Src/usart_utils.c ****         COMMAND = cmd_adc_id;
 125              		.loc 1 19 17 is_stmt 0 view .LVU18
 126 004c 154B     		ldr	r3, .L8+12
 127 004e 0222     		movs	r2, #2
 128 0050 1A70     		strb	r2, [r3]
 129 0052 F3E7     		b	.L1
 130              	.L4:
  21:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 131              		.loc 1 21 10 is_stmt 1 view .LVU19
  21:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 132              		.loc 1 21 14 is_stmt 0 view .LVU20
 133 0054 1549     		ldr	r1, .L8+20
 134 0056 2000     		movs	r0, r4
 135 0058 FFF7FEFF 		bl	strcmp
 136              	.LVL9:
  21:Src/usart_utils.c ****     else if (strcmp(buffer, "adc reset") == 0)
 137              		.loc 1 21 13 view .LVU21
 138 005c 0028     		cmp	r0, #0
 139 005e 03D1     		bne	.L5
  23:Src/usart_utils.c ****         COMMAND = cmd_adc_reset;
 140              		.loc 1 23 9 is_stmt 1 view .LVU22
  23:Src/usart_utils.c ****         COMMAND = cmd_adc_reset;
 141              		.loc 1 23 17 is_stmt 0 view .LVU23
 142 0060 104B     		ldr	r3, .L8+12
 143 0062 0322     		movs	r2, #3
 144 0064 1A70     		strb	r2, [r3]
 145 0066 E9E7     		b	.L1
 146              	.L5:
  25:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 147              		.loc 1 25 10 is_stmt 1 view .LVU24
  25:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 148              		.loc 1 25 14 is_stmt 0 view .LVU25
 149 0068 1149     		ldr	r1, .L8+24
 150 006a 2000     		movs	r0, r4
 151 006c FFF7FEFF 		bl	strcmp
 152              	.LVL10:
  25:Src/usart_utils.c ****     else if (strcmp(buffer, "adc debug") == 0)
 153              		.loc 1 25 13 view .LVU26
 154 0070 0028     		cmp	r0, #0
 155 0072 03D1     		bne	.L6
  27:Src/usart_utils.c ****         COMMAND = cmd_adc_debug;
 156              		.loc 1 27 9 is_stmt 1 view .LVU27
  27:Src/usart_utils.c ****         COMMAND = cmd_adc_debug;
 157              		.loc 1 27 17 is_stmt 0 view .LVU28
 158 0074 0B4B     		ldr	r3, .L8+12
 159 0076 0422     		movs	r2, #4
 160 0078 1A70     		strb	r2, [r3]
 161 007a DFE7     		b	.L1
 162              	.L6:
  29:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 163              		.loc 1 29 10 is_stmt 1 view .LVU29
  29:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 164              		.loc 1 29 14 is_stmt 0 view .LVU30
 165 007c 0D49     		ldr	r1, .L8+28
 166 007e 2000     		movs	r0, r4
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 5


 167 0080 FFF7FEFF 		bl	strcmp
 168              	.LVL11:
  29:Src/usart_utils.c ****     else if (strcmp(buffer, "adc data") == 0)
 169              		.loc 1 29 13 view .LVU31
 170 0084 0028     		cmp	r0, #0
 171 0086 03D1     		bne	.L7
  31:Src/usart_utils.c ****         COMMAND = cmd_adc_data;
 172              		.loc 1 31 9 is_stmt 1 view .LVU32
  31:Src/usart_utils.c ****         COMMAND = cmd_adc_data;
 173              		.loc 1 31 17 is_stmt 0 view .LVU33
 174 0088 064B     		ldr	r3, .L8+12
 175 008a 0522     		movs	r2, #5
 176 008c 1A70     		strb	r2, [r3]
 177 008e D5E7     		b	.L1
 178              	.L7:
  35:Src/usart_utils.c ****         COMMAND = cmd_undefined;
 179              		.loc 1 35 9 is_stmt 1 view .LVU34
  35:Src/usart_utils.c ****         COMMAND = cmd_undefined;
 180              		.loc 1 35 17 is_stmt 0 view .LVU35
 181 0090 044B     		ldr	r3, .L8+12
 182 0092 FF22     		movs	r2, #255
 183 0094 1A70     		strb	r2, [r3]
 184              	.LBE4:
 185              		.loc 1 37 1 view .LVU36
 186 0096 D1E7     		b	.L1
 187              	.L9:
 188              		.align	2
 189              	.L8:
 190 0098 00000000 		.word	.LC0
 191 009c 00000000 		.word	huart2
 192 00a0 08000000 		.word	.LC3
 193 00a4 00000000 		.word	COMMAND
 194 00a8 10000000 		.word	.LC6
 195 00ac 18000000 		.word	.LC8
 196 00b0 24000000 		.word	.LC10
 197 00b4 30000000 		.word	.LC12
 198              		.cfi_endproc
 199              	.LFE284:
 201              		.text
 202              	.Letext0:
 203              		.file 2 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\machine\\_default_ty
 204              		.file 3 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
 205              		.file 4 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/system_stm32g0xx.h"
 206              		.file 5 "Drivers/CMSIS/Device/ST/STM32G0xx/Include/stm32g071xx.h"
 207              		.file 6 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_def.h"
 208              		.file 7 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_dma.h"
 209              		.file 8 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_flash.h"
 210              		.file 9 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal_uart.h"
 211              		.file 10 "Drivers/STM32G0xx_HAL_Driver/Inc/stm32g0xx_hal.h"
 212              		.file 11 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\lock.h"
 213              		.file 12 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\_types.h"
 214              		.file 13 "c:\\gnu tools arm embedded\\9 2019-q4-major\\lib\\gcc\\arm-none-eabi\\9.2.1\\include\\st
 215              		.file 14 "c:\\gnu tools arm embedded\\9 2019-q4-major\\arm-none-eabi\\include\\sys\\reent.h"
 216              		.file 15 "Inc/usart.h"
 217              		.file 16 "Inc/state.h"
 218              		.file 17 "<built-in>"
ARM GAS  C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 usart_utils.c
C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s:16     .rodata.UART_PARSE.str1.4:00000000 $d
C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s:35     .text.UART_PARSE:00000000 $t
C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s:43     .text.UART_PARSE:00000000 UART_PARSE
C:\Users\Mateusz\AppData\Local\Temp\ccnU4JJl.s:190    .text.UART_PARSE:00000098 $d

UNDEFINED SYMBOLS
memset
HAL_UART_Transmit
strcmp
huart2
COMMAND
